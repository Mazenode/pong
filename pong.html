<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pong</title>
</head>
<body>
  
</body>

<script src="./js/game.js"></script>
<script src="./js/game.display.js"></script>
<script src="./js/game.control.js"></script>
<script src="./js/game.ai.js"></script>
<script>
    (function () {
    // début du code isolé
    var requestAnimId;
    
    var initialisation = function() {
      // le code de l'initialisation
      game.init();
      requestAnimId = window.requestAnimationFrame(main); // premier appel de main au rafraîchissement de la page
    }
    
    var main = function() {
      // le code du jeu
      game.clearLayer(game.playersBallLayer);
      game.movePlayers();
      game.initMouse(game.control.onMouseMove);
      game.displayPlayers();
      game.moveBall();
      if ( game.ball.inGame ) {
        game.lostBall();
      }
      game.ai.move();
      game.collideBallWithPlayersAndAction();
      requestAnimId = window.requestAnimationFrame(main); // rappel de main au prochain rafraîchissement de la page
    }
    window.onload = initialisation; // appel de la fonction initialisation au chargement de la page
    
    // fin du code isolé
  })();
    </script>

<div id="menu"><input id="startGame" type="button" value="Start Game"></div>
<div id="divGame"></div>
</html>